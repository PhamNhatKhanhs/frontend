{"ast":null,"code":"import React,{useEffect,useState}from'react';import{LinkContainer}from'react-router-bootstrap';import{Table,Button,Image,Form}from'react-bootstrap';import{useDispatch,useSelector}from'react-redux';import Message from'../components/Message';import Loader from'../components/Loader';import{listOrders}from'../actions/orderActions';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const OrderListScreen=_ref=>{let{history}=_ref;const[searchTerm,setSearchTerm]=useState('');// State để lưu giá trị tìm kiếm\nconst dispatch=useDispatch();const orderList=useSelector(state=>state.orderList);const{loading,error,orders}=orderList;const userLogin=useSelector(state=>state.userLogin);const{userInfo}=userLogin;useEffect(()=>{if(userInfo&&userInfo.isAdmin){dispatch(listOrders());}else{history.push('/login');}},[dispatch,userInfo,history]);// Lọc đơn hàng dựa trên tên người dùng\nconst filteredOrders=orders?orders.filter(order=>order.user&&order.user.name.toLowerCase().includes(searchTerm.toLowerCase())):[];return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Button,{variant:\"secondary\",className:\"mb-3\",onClick:()=>history.goBack(),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-arrow-left\"}),\" Quay L\\u1EA1i\"]}),/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0110\\u01A1n H\\xE0ng\"}),/*#__PURE__*/_jsx(Form.Group,{controlId:\"search\",className:\"mb-3\",children:/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"T\\xECm ki\\u1EBFm theo t\\xEAn ng\\u01B0\\u1EDDi d\\xF9ng...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value)})}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(Table,{bordered:true,hover:true,responsive:true,className:\"table-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\u1EA2nh\"}),/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"User\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Ng\\xE0y\"}),/*#__PURE__*/_jsx(\"th\",{children:\"T\\u1ED5ng\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0110\\xE3 Thanh To\\xE1n\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0110\\xE3 Giao\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Chi Ti\\u1EBFt\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredOrders.map(order=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:order.orderItems&&order.orderItems.length>0?/*#__PURE__*/_jsx(Image,{src:order.orderItems[0].image,alt:order.orderItems[0].name,fluid:true,rounded:true,style:{width:'50px',height:'50px'}}):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-box\",style:{fontSize:'2rem',color:'gray'}})}),/*#__PURE__*/_jsx(\"td\",{children:order._id}),/*#__PURE__*/_jsx(\"td\",{children:order.user&&order.user.name}),/*#__PURE__*/_jsx(\"td\",{children:order.createdAt.substring(0,10)}),/*#__PURE__*/_jsxs(\"td\",{children:[order.totalPrice,\" VND\"]}),/*#__PURE__*/_jsx(\"td\",{children:order.isPaid?/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-check-circle\",style:{color:'green'}}):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times-circle\",style:{color:'red'}})}),/*#__PURE__*/_jsx(\"td\",{children:order.isDelivered?/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-check-circle\",style:{color:'green'}}):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times-circle\",style:{color:'red'}})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(LinkContainer,{to:`/order/${order._id}`,children:/*#__PURE__*/_jsx(Button,{className:\"btn-sm\",variant:\"light\",children:\"Chi Ti\\u1EBFt\"})})})]},order._id))})]})]});};export default OrderListScreen;","map":{"version":3,"names":["React","useEffect","useState","LinkContainer","Table","Button","Image","Form","useDispatch","useSelector","Message","Loader","listOrders","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","OrderListScreen","_ref","history","searchTerm","setSearchTerm","dispatch","orderList","state","loading","error","orders","userLogin","userInfo","isAdmin","push","filteredOrders","filter","order","user","name","toLowerCase","includes","children","variant","className","onClick","goBack","Group","controlId","Control","type","placeholder","value","onChange","e","target","bordered","hover","responsive","map","orderItems","length","src","image","alt","fluid","rounded","style","width","height","fontSize","color","_id","createdAt","substring","totalPrice","isPaid","isDelivered","to"],"sources":["D:/Download/baitaplon/frontend/src/screens/OrderListScreen.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { LinkContainer } from 'react-router-bootstrap';\nimport { Table, Button, Image, Form } from 'react-bootstrap';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Message from '../components/Message';\nimport Loader from '../components/Loader';\nimport { listOrders } from '../actions/orderActions';\n\nconst OrderListScreen = ({ history }) => {\n  const [searchTerm, setSearchTerm] = useState(''); // State để lưu giá trị tìm kiếm\n  const dispatch = useDispatch();\n\n  const orderList = useSelector((state) => state.orderList);\n  const { loading, error, orders } = orderList;\n\n  const userLogin = useSelector((state) => state.userLogin);\n  const { userInfo } = userLogin;\n\n  useEffect(() => {\n    if (userInfo && userInfo.isAdmin) {\n      dispatch(listOrders());\n    } else {\n      history.push('/login');\n    }\n  }, [dispatch, userInfo, history]);\n\n  // Lọc đơn hàng dựa trên tên người dùng\n  const filteredOrders = orders\n    ? orders.filter((order) =>\n        order.user &&\n        order.user.name.toLowerCase().includes(searchTerm.toLowerCase())\n      )\n    : [];\n\n  return (\n    <>\n      {/* Nút quay lại */}\n      <Button \n        variant=\"secondary\" \n        className=\"mb-3\" \n        onClick={() => history.goBack()}\n      >\n        <i className=\"fas fa-arrow-left\"></i> Quay Lại\n      </Button>\n\n      <h1>Đơn Hàng</h1>\n      <Form.Group controlId=\"search\" className=\"mb-3\">\n        <Form.Control\n          type=\"text\"\n          placeholder=\"Tìm kiếm theo tên người dùng...\"\n          value={searchTerm}\n          onChange={(e) => setSearchTerm(e.target.value)}\n        />\n      </Form.Group>\n      {loading ? (\n        <Loader />\n      ) : error ? (\n        <Message variant=\"danger\">{error}</Message>\n      ) : (\n        <Table bordered hover responsive className=\"table-sm\">\n          <thead>\n            <tr>\n              <th>Ảnh</th>\n              <th>ID</th>\n              <th>User</th>\n              <th>Ngày</th>\n              <th>Tổng</th>\n              <th>Đã Thanh Toán</th>\n              <th>Đã Giao</th>\n              <th>Chi Tiết</th>\n            </tr>\n          </thead>\n          <tbody>\n            {filteredOrders.map((order) => (\n              <tr key={order._id}>\n                {/* Cột ảnh sản phẩm */}\n                <td>\n                  {order.orderItems && order.orderItems.length > 0 ? (\n                    <Image\n                      src={order.orderItems[0].image}\n                      alt={order.orderItems[0].name}\n                      fluid\n                      rounded\n                      style={{ width: '50px', height: '50px' }}\n                    />\n                  ) : (\n                    <i\n                      className=\"fas fa-box\"\n                      style={{ fontSize: '2rem', color: 'gray' }}\n                    ></i>\n                  )}\n                </td>\n                <td>{order._id}</td>\n                <td>{order.user && order.user.name}</td>\n                <td>{order.createdAt.substring(0, 10)}</td>\n                <td>{order.totalPrice} VND</td>\n                <td>\n                  {order.isPaid ? (\n                    <i\n                      className=\"fas fa-check-circle\"\n                      style={{ color: 'green' }}\n                    ></i>\n                  ) : (\n                    <i\n                      className=\"fas fa-times-circle\"\n                      style={{ color: 'red' }}\n                    ></i>\n                  )}\n                </td>\n                <td>\n                  {order.isDelivered ? (\n                    <i\n                      className=\"fas fa-check-circle\"\n                      style={{ color: 'green' }}\n                    ></i>\n                  ) : (\n                    <i\n                      className=\"fas fa-times-circle\"\n                      style={{ color: 'red' }}\n                    ></i>\n                  )}\n                </td>\n                <td>\n                  <LinkContainer to={`/order/${order._id}`}>\n                    <Button className=\"btn-sm\" variant=\"light\">\n                      Chi Tiết\n                    </Button>\n                  </LinkContainer>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </Table>\n      )}\n    </>\n  );\n};\n\nexport default OrderListScreen;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}