{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import{Form,Button,Row,Col,Spinner,ProgressBar}from'react-bootstrap';import{useDispatch,useSelector}from'react-redux';import Message from'../components/Message';import FormContainer from'../components/FormContainer';import{register}from'../actions/userActions';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const RegisterScreen=_ref=>{let{location,history}=_ref;const[name,setName]=useState('');const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[confirmPassword,setConfirmPassword]=useState('');const[message,setMessage]=useState(null);const[passwordStrength,setPasswordStrength]=useState(0);const dispatch=useDispatch();const userRegister=useSelector(state=>state.userRegister);const{loading,error,userInfo}=userRegister;const redirect=location.search?location.search.split('=')[1]:'/';useEffect(()=>{if(userInfo){history.push(redirect);}},[history,userInfo,redirect]);const validatePassword=password=>{let strength=0;if(password.length>=8)strength+=25;if(/[A-Z]/.test(password))strength+=25;if(/[a-z]/.test(password))strength+=25;if(/\\d/.test(password))strength+=25;return strength;};const submitHandler=e=>{e.preventDefault();if(!name||!email||!password||!confirmPassword){setMessage('Vui lòng điền đầy đủ thông tin!');}else if(password!==confirmPassword){setMessage('Mật khẩu không khớp!');}else if(validatePassword(password)<50){setMessage('Mật khẩu chưa đủ mạnh!');}else{setMessage(null);dispatch(register(name,email,password));}};const handlePasswordChange=value=>{setPassword(value);setPasswordStrength(validatePassword(value));};return/*#__PURE__*/_jsxs(FormContainer,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center\",children:\"\\u0110\\u0103ng K\\xFD\"}),message&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:message}),error&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"loading-overlay\",children:/*#__PURE__*/_jsx(Spinner,{animation:\"border\",variant:\"primary\"})}),/*#__PURE__*/_jsxs(Form,{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"name\",className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"T\\xEAn\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Nh\\u1EADp t\\xEAn\",value:name,onChange:e=>setName(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"email\",className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",placeholder:\"Nh\\u1EADp email\",value:email,onChange:e=>setEmail(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"password\",className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"M\\u1EADt Kh\\u1EA9u\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"Nh\\u1EADp m\\u1EADt kh\\u1EA9u\",value:password,onChange:e=>handlePasswordChange(e.target.value),required:true}),/*#__PURE__*/_jsx(ProgressBar,{now:passwordStrength,label:`${passwordStrength}%`,className:\"mt-2\",variant:passwordStrength<50?'danger':passwordStrength<75?'warning':'success'})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"confirmPassword\",className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Nh\\u1EADp L\\u1EA1i M\\u1EADt Kh\\u1EA9u\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"Nh\\u1EADp l\\u1EA1i m\\u1EADt kh\\u1EA9u\",value:confirmPassword,onChange:e=>setConfirmPassword(e.target.value),required:true})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"primary\",className:\"w-100\",disabled:loading,children:\"\\u0110\\u0103ng K\\xFD\"})]}),/*#__PURE__*/_jsx(Row,{className:\"py-3\",children:/*#__PURE__*/_jsxs(Col,{className:\"text-center\",children:[\"\\u0110\\xE3 C\\xF3 T\\xE0i Kho\\u1EA3n?\",' ',/*#__PURE__*/_jsx(Link,{to:redirect?`/login?redirect=${redirect}`:'/login',children:\"\\u0110\\u0103ng Nh\\u1EADp\"})]})})]});};export default RegisterScreen;","map":{"version":3,"names":["React","useState","useEffect","Link","Form","Button","Row","Col","Spinner","ProgressBar","useDispatch","useSelector","Message","FormContainer","register","jsx","_jsx","jsxs","_jsxs","RegisterScreen","_ref","location","history","name","setName","email","setEmail","password","setPassword","confirmPassword","setConfirmPassword","message","setMessage","passwordStrength","setPasswordStrength","dispatch","userRegister","state","loading","error","userInfo","redirect","search","split","push","validatePassword","strength","length","test","submitHandler","e","preventDefault","handlePasswordChange","value","children","className","variant","animation","onSubmit","Group","controlId","Label","Control","type","placeholder","onChange","target","required","now","label","disabled","to"],"sources":["D:/Download/baitaplon/frontend/src/screens/RegisterScreen.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Form, Button, Row, Col, Spinner, ProgressBar } from 'react-bootstrap';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Message from '../components/Message';\nimport FormContainer from '../components/FormContainer';\nimport { register } from '../actions/userActions';\n\nconst RegisterScreen = ({ location, history }) => {\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [message, setMessage] = useState(null);\n  const [passwordStrength, setPasswordStrength] = useState(0);\n\n  const dispatch = useDispatch();\n\n  const userRegister = useSelector((state) => state.userRegister);\n  const { loading, error, userInfo } = userRegister;\n\n  const redirect = location.search ? location.search.split('=')[1] : '/';\n\n  useEffect(() => {\n    if (userInfo) {\n      history.push(redirect);\n    }\n  }, [history, userInfo, redirect]);\n\n  const validatePassword = (password) => {\n    let strength = 0;\n    if (password.length >= 8) strength += 25;\n    if (/[A-Z]/.test(password)) strength += 25;\n    if (/[a-z]/.test(password)) strength += 25;\n    if (/\\d/.test(password)) strength += 25;\n    return strength;\n  };\n\n  const submitHandler = (e) => {\n    e.preventDefault();\n    if (!name || !email || !password || !confirmPassword) {\n      setMessage('Vui lòng điền đầy đủ thông tin!');\n    } else if (password !== confirmPassword) {\n      setMessage('Mật khẩu không khớp!');\n    } else if (validatePassword(password) < 50) {\n      setMessage('Mật khẩu chưa đủ mạnh!');\n    } else {\n      setMessage(null);\n      dispatch(register(name, email, password));\n    }\n  };\n\n  const handlePasswordChange = (value) => {\n    setPassword(value);\n    setPasswordStrength(validatePassword(value));\n  };\n\n  return (\n    <FormContainer>\n      <h1 className=\"text-center\">Đăng Ký</h1>\n      {message && <Message variant=\"danger\">{message}</Message>}\n      {error && <Message variant=\"danger\">{error}</Message>}\n      {loading && (\n        <div className=\"loading-overlay\">\n          <Spinner animation=\"border\" variant=\"primary\" />\n        </div>\n      )}\n      <Form onSubmit={submitHandler}>\n        {/* Name Field */}\n        <Form.Group controlId=\"name\" className=\"mb-3\">\n          <Form.Label>Tên</Form.Label>\n          <Form.Control\n            type=\"text\"\n            placeholder=\"Nhập tên\"\n            value={name}\n            onChange={(e) => setName(e.target.value)}\n            required\n          />\n        </Form.Group>\n\n        {/* Email Field */}\n        <Form.Group controlId=\"email\" className=\"mb-3\">\n          <Form.Label>Email</Form.Label>\n          <Form.Control\n            type=\"email\"\n            placeholder=\"Nhập email\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n            required\n          />\n        </Form.Group>\n\n        {/* Password Field */}\n        <Form.Group controlId=\"password\" className=\"mb-3\">\n          <Form.Label>Mật Khẩu</Form.Label>\n          <Form.Control\n            type=\"password\"\n            placeholder=\"Nhập mật khẩu\"\n            value={password}\n            onChange={(e) => handlePasswordChange(e.target.value)}\n            required\n          />\n          <ProgressBar\n            now={passwordStrength}\n            label={`${passwordStrength}%`}\n            className=\"mt-2\"\n            variant={\n              passwordStrength < 50\n                ? 'danger'\n                : passwordStrength < 75\n                ? 'warning'\n                : 'success'\n            }\n          />\n        </Form.Group>\n\n        {/* Confirm Password Field */}\n        <Form.Group controlId=\"confirmPassword\" className=\"mb-3\">\n          <Form.Label>Nhập Lại Mật Khẩu</Form.Label>\n          <Form.Control\n            type=\"password\"\n            placeholder=\"Nhập lại mật khẩu\"\n            value={confirmPassword}\n            onChange={(e) => setConfirmPassword(e.target.value)}\n            required\n          />\n        </Form.Group>\n\n        {/* Register Button */}\n        <Button type=\"submit\" variant=\"primary\" className=\"w-100\" disabled={loading}>\n          Đăng Ký\n        </Button>\n      </Form>\n\n      {/* Login Link */}\n      <Row className=\"py-3\">\n        <Col className=\"text-center\">\n          Đã Có Tài Khoản?{' '}\n          <Link to={redirect ? `/login?redirect=${redirect}` : '/login'}>\n            Đăng Nhập\n          </Link>\n        </Col>\n      </Row>\n    </FormContainer>\n  );\n};\n\nexport default RegisterScreen;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}