{"ast":null,"code":"import axios from 'axios';\nimport { CART_ADD_ITEM, CART_REMOVE_ITEM, CART_SAVE_SHIPPING_ADDRESS, CART_SAVE_PAYMENT_METHOD, CART_CLEAR_ITEMS } from '../constants/cartConstants';\n\n// Add item to cart\nexport const addToCart = (id, qty) => async (dispatch, getState) => {\n  try {\n    // Fetch product data\n    const {\n      data\n    } = await axios.get(`/api/products/${id}`);\n    dispatch({\n      type: CART_ADD_ITEM,\n      payload: {\n        product: data._id,\n        name: data.name,\n        image: data.image,\n        price: data.price,\n        countInStock: data.countInStock,\n        qty\n      }\n    });\n\n    // Save updated cart items to local storage\n    const {\n      cartItems\n    } = getState().cart;\n    if (cartItems) {\n      localStorage.setItem('cartItems', JSON.stringify(cartItems));\n    }\n  } catch (error) {\n    console.error('Failed to add to cart:', error.message);\n  }\n};\n\n// Remove item from cart\nexport const removeFromCart = id => (dispatch, getState) => {\n  dispatch({\n    type: CART_REMOVE_ITEM,\n    payload: id\n  });\n  const {\n    cartItems\n  } = getState().cart;\n  if (cartItems) {\n    localStorage.setItem('cartItems', JSON.stringify(cartItems));\n  }\n};\n\n// Save shipping address\nexport const saveShippingAddress = data => dispatch => {\n  dispatch({\n    type: CART_SAVE_SHIPPING_ADDRESS,\n    payload: data\n  });\n  localStorage.setItem('shippingAddress', JSON.stringify(data));\n};\n\n// Save payment method\nexport const savePaymentMethod = data => dispatch => {\n  dispatch({\n    type: CART_SAVE_PAYMENT_METHOD,\n    payload: data\n  });\n  localStorage.setItem('paymentMethod', JSON.stringify(data));\n};","map":{"version":3,"names":["axios","CART_ADD_ITEM","CART_REMOVE_ITEM","CART_SAVE_SHIPPING_ADDRESS","CART_SAVE_PAYMENT_METHOD","CART_CLEAR_ITEMS","addToCart","id","qty","dispatch","getState","data","get","type","payload","product","_id","name","image","price","countInStock","cartItems","cart","localStorage","setItem","JSON","stringify","error","console","message","removeFromCart","saveShippingAddress","savePaymentMethod"],"sources":["D:/Download/baitaplon/frontend/src/actions/cartActions.js"],"sourcesContent":["import axios from 'axios'\nimport {\n\tCART_ADD_ITEM,\n\tCART_REMOVE_ITEM,\n\tCART_SAVE_SHIPPING_ADDRESS,\n\tCART_SAVE_PAYMENT_METHOD,\n\tCART_CLEAR_ITEMS,\n} from '../constants/cartConstants'\n\n// Add item to cart\nexport const addToCart = (id, qty) => async (dispatch, getState) => {\n\ttry {\n\t\t// Fetch product data\n\t\tconst { data } = await axios.get(`/api/products/${id}`)\n\n\t\tdispatch({\n\t\t\ttype: CART_ADD_ITEM,\n\t\t\tpayload: {\n\t\t\t\tproduct: data._id,\n\t\t\t\tname: data.name,\n\t\t\t\timage: data.image,\n\t\t\t\tprice: data.price,\n\t\t\t\tcountInStock: data.countInStock,\n\t\t\t\tqty,\n\t\t\t},\n\t\t})\n\n\t\t// Save updated cart items to local storage\n\t\tconst { cartItems } = getState().cart\n\t\tif (cartItems) {\n\t\t\tlocalStorage.setItem('cartItems', JSON.stringify(cartItems))\n\t\t}\n\t} catch (error) {\n\t\tconsole.error('Failed to add to cart:', error.message)\n\t}\n}\n\n// Remove item from cart\nexport const removeFromCart = (id) => (dispatch, getState) => {\n\tdispatch({\n\t\ttype: CART_REMOVE_ITEM,\n\t\tpayload: id,\n\t})\n\n\tconst { cartItems } = getState().cart\n\tif (cartItems) {\n\t\tlocalStorage.setItem('cartItems', JSON.stringify(cartItems))\n\t}\n}\n\n// Save shipping address\nexport const saveShippingAddress = (data) => (dispatch) => {\n\tdispatch({\n\t\ttype: CART_SAVE_SHIPPING_ADDRESS,\n\t\tpayload: data,\n\t})\n\n\tlocalStorage.setItem('shippingAddress', JSON.stringify(data))\n}\n\n// Save payment method\nexport const savePaymentMethod = (data) => (dispatch) => {\n\tdispatch({\n\t\ttype: CART_SAVE_PAYMENT_METHOD,\n\t\tpayload: data,\n\t})\n\n\tlocalStorage.setItem('paymentMethod', JSON.stringify(data))\n}\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SACCC,aAAa,EACbC,gBAAgB,EAChBC,0BAA0B,EAC1BC,wBAAwB,EACxBC,gBAAgB,QACV,4BAA4B;;AAEnC;AACA,OAAO,MAAMC,SAAS,GAAGA,CAACC,EAAE,EAAEC,GAAG,KAAK,OAAOC,QAAQ,EAAEC,QAAQ,KAAK;EACnE,IAAI;IACH;IACA,MAAM;MAAEC;IAAK,CAAC,GAAG,MAAMX,KAAK,CAACY,GAAG,CAAC,iBAAiBL,EAAE,EAAE,CAAC;IAEvDE,QAAQ,CAAC;MACRI,IAAI,EAAEZ,aAAa;MACnBa,OAAO,EAAE;QACRC,OAAO,EAAEJ,IAAI,CAACK,GAAG;QACjBC,IAAI,EAAEN,IAAI,CAACM,IAAI;QACfC,KAAK,EAAEP,IAAI,CAACO,KAAK;QACjBC,KAAK,EAAER,IAAI,CAACQ,KAAK;QACjBC,YAAY,EAAET,IAAI,CAACS,YAAY;QAC/BZ;MACD;IACD,CAAC,CAAC;;IAEF;IACA,MAAM;MAAEa;IAAU,CAAC,GAAGX,QAAQ,CAAC,CAAC,CAACY,IAAI;IACrC,IAAID,SAAS,EAAE;MACdE,YAAY,CAACC,OAAO,CAAC,WAAW,EAAEC,IAAI,CAACC,SAAS,CAACL,SAAS,CAAC,CAAC;IAC7D;EACD,CAAC,CAAC,OAAOM,KAAK,EAAE;IACfC,OAAO,CAACD,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAACE,OAAO,CAAC;EACvD;AACD,CAAC;;AAED;AACA,OAAO,MAAMC,cAAc,GAAIvB,EAAE,IAAK,CAACE,QAAQ,EAAEC,QAAQ,KAAK;EAC7DD,QAAQ,CAAC;IACRI,IAAI,EAAEX,gBAAgB;IACtBY,OAAO,EAAEP;EACV,CAAC,CAAC;EAEF,MAAM;IAAEc;EAAU,CAAC,GAAGX,QAAQ,CAAC,CAAC,CAACY,IAAI;EACrC,IAAID,SAAS,EAAE;IACdE,YAAY,CAACC,OAAO,CAAC,WAAW,EAAEC,IAAI,CAACC,SAAS,CAACL,SAAS,CAAC,CAAC;EAC7D;AACD,CAAC;;AAED;AACA,OAAO,MAAMU,mBAAmB,GAAIpB,IAAI,IAAMF,QAAQ,IAAK;EAC1DA,QAAQ,CAAC;IACRI,IAAI,EAAEV,0BAA0B;IAChCW,OAAO,EAAEH;EACV,CAAC,CAAC;EAEFY,YAAY,CAACC,OAAO,CAAC,iBAAiB,EAAEC,IAAI,CAACC,SAAS,CAACf,IAAI,CAAC,CAAC;AAC9D,CAAC;;AAED;AACA,OAAO,MAAMqB,iBAAiB,GAAIrB,IAAI,IAAMF,QAAQ,IAAK;EACxDA,QAAQ,CAAC;IACRI,IAAI,EAAET,wBAAwB;IAC9BU,OAAO,EAAEH;EACV,CAAC,CAAC;EAEFY,YAAY,CAACC,OAAO,CAAC,eAAe,EAAEC,IAAI,CAACC,SAAS,CAACf,IAAI,CAAC,CAAC;AAC5D,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module"}