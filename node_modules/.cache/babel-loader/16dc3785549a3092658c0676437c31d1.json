{"ast":null,"code":"import React,{useEffect,useState}from'react';import{LinkContainer}from'react-router-bootstrap';import{Table,Button,Alert}from'react-bootstrap';import{useDispatch,useSelector}from'react-redux';import Message from'../components/Message';import Loader from'../components/Loader';import{listUsers,deleteUser}from'../actions/userActions';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const UserListScreen=_ref=>{let{history}=_ref;const[searchTerm,setSearchTerm]=useState('');const dispatch=useDispatch();// Lấy danh sách người dùng\nconst userList=useSelector(state=>state.userList);const{loading,error,users}=userList;// Lấy thông tin đăng nhập\nconst userLogin=useSelector(state=>state.userLogin);const{userInfo}=userLogin;// Xử lý xóa người dùng\nconst userDelete=useSelector(state=>state.userDelete);const{success:successDelete,loading:loadingDelete,error:errorDelete}=userDelete;useEffect(()=>{if(userInfo&&userInfo.isAdmin){dispatch(listUsers());}else{history.push('/login');}},[dispatch,userInfo,history,successDelete]);const deleteHandler=id=>{if(window.confirm('Bạn có chắc chắn muốn xóa người dùng này không?')){dispatch(deleteUser(id));}};// Lọc danh sách người dùng\nconst filteredUsers=users?users.filter(user=>user.name.toLowerCase().includes(searchTerm.toLowerCase())):[];return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Button,{variant:\"secondary\",className:\"mb-3\",onClick:()=>history.goBack(),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-arrow-left\"}),\" Quay l\\u1EA1i\"]}),/*#__PURE__*/_jsx(\"h1\",{children:\"Qu\\u1EA3n L\\xFD Ng\\u01B0\\u1EDDi D\\xF9ng\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"T\\xECm theo t\\xEAn...\",className:\"form-control mb-3\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value)}),loadingDelete&&/*#__PURE__*/_jsx(Loader,{}),errorDelete&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorDelete}),successDelete&&/*#__PURE__*/_jsx(Alert,{variant:\"success\",children:\"Ng\\u01B0\\u1EDDi d\\xF9ng \\u0111\\xE3 \\u0111\\u01B0\\u1EE3c x\\xF3a th\\xE0nh c\\xF4ng!\"}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(Table,{bordered:true,hover:true,responsive:true,className:\"table-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"T\\xEAn\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Admin\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Tr\\u1EA1ng Th\\xE1i\"}),/*#__PURE__*/_jsx(\"th\",{children:\"S\\u1EEDa\"}),/*#__PURE__*/_jsx(\"th\",{children:\"X\\xF3a\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredUsers.map(user=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:user._id}),/*#__PURE__*/_jsx(\"td\",{children:user.name}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"a\",{href:`mailto:${user.email}`,children:user.email})}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:user.isAdmin?/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-check\",style:{color:'green'}}):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\",style:{color:'red'}})}),/*#__PURE__*/_jsx(\"td\",{children:user.isAdmin?'Quản trị viên':'Người dùng'}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(LinkContainer,{to:`/admin/user/${user._id}/edit`,children:/*#__PURE__*/_jsx(Button,{variant:\"light\",className:\"btn-sm\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit\"})})})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Button,{variant:\"danger\",className:\"btn-sm\",onClick:()=>deleteHandler(user._id),children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})})]},user._id))})]})]});};export default UserListScreen;","map":{"version":3,"names":["React","useEffect","useState","LinkContainer","Table","Button","Alert","useDispatch","useSelector","Message","Loader","listUsers","deleteUser","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","UserListScreen","_ref","history","searchTerm","setSearchTerm","dispatch","userList","state","loading","error","users","userLogin","userInfo","userDelete","success","successDelete","loadingDelete","errorDelete","isAdmin","push","deleteHandler","id","window","confirm","filteredUsers","filter","user","name","toLowerCase","includes","children","variant","className","onClick","goBack","type","placeholder","value","onChange","e","target","bordered","hover","responsive","map","_id","href","email","style","color","to"],"sources":["D:/Download/baitaplon/frontend/src/screens/UserListScreen.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { LinkContainer } from 'react-router-bootstrap';\nimport { Table, Button, Alert } from 'react-bootstrap';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Message from '../components/Message';\nimport Loader from '../components/Loader';\nimport { listUsers, deleteUser } from '../actions/userActions';\n\nconst UserListScreen = ({ history }) => {\n  const [searchTerm, setSearchTerm] = useState('');\n  const dispatch = useDispatch();\n\n  // Lấy danh sách người dùng\n  const userList = useSelector((state) => state.userList);\n  const { loading, error, users } = userList;\n\n  // Lấy thông tin đăng nhập\n  const userLogin = useSelector((state) => state.userLogin);\n  const { userInfo } = userLogin;\n\n  // Xử lý xóa người dùng\n  const userDelete = useSelector((state) => state.userDelete);\n  const { success: successDelete, loading: loadingDelete, error: errorDelete } = userDelete;\n\n  useEffect(() => {\n    if (userInfo && userInfo.isAdmin) {\n      dispatch(listUsers());\n    } else {\n      history.push('/login');\n    }\n  }, [dispatch, userInfo, history, successDelete]);\n\n  const deleteHandler = (id) => {\n    if (window.confirm('Bạn có chắc chắn muốn xóa người dùng này không?')) {\n      dispatch(deleteUser(id));\n    }\n  };\n\n  // Lọc danh sách người dùng\n  const filteredUsers = users ? users.filter((user) =>\n    user.name.toLowerCase().includes(searchTerm.toLowerCase())\n  ) : [];\n\n  return (\n    <>\n      <Button\n        variant=\"secondary\"\n        className=\"mb-3\"\n        onClick={() => history.goBack()}\n      >\n        <i className=\"fas fa-arrow-left\"></i> Quay lại\n      </Button>\n\n      <h1>Quản Lý Người Dùng</h1>\n\n      {/* Ô tìm kiếm */}\n      <input\n        type=\"text\"\n        placeholder=\"Tìm theo tên...\"\n        className=\"form-control mb-3\"\n        value={searchTerm}\n        onChange={(e) => setSearchTerm(e.target.value)}\n      />\n\n      {/* Thông báo trạng thái xóa người dùng */}\n      {loadingDelete && <Loader />}\n      {errorDelete && <Message variant=\"danger\">{errorDelete}</Message>}\n      {successDelete && (\n        <Alert variant=\"success\">\n          Người dùng đã được xóa thành công!\n        </Alert>\n      )}\n\n      {/* Danh sách người dùng */}\n      {loading ? (\n        <Loader />\n      ) : error ? (\n        <Message variant=\"danger\">{error}</Message>\n      ) : (\n        <Table bordered hover responsive className=\"table-sm\">\n          <thead>\n            <tr>\n              <th>ID</th>\n              <th>Tên</th>\n              <th>Email</th>\n              <th>Admin</th>\n              <th>Trạng Thái</th>\n              <th>Sửa</th>\n              <th>Xóa</th>\n            </tr>\n          </thead>\n          <tbody>\n            {filteredUsers.map((user) => (\n              <tr key={user._id}>\n                <td>{user._id}</td>\n                <td>{user.name}</td>\n                <td>\n                  <a href={`mailto:${user.email}`}>{user.email}</a>\n                </td>\n                <td className=\"text-center\">\n                  {user.isAdmin ? (\n                    <i className=\"fas fa-check\" style={{ color: 'green' }}></i>\n                  ) : (\n                    <i className=\"fas fa-times\" style={{ color: 'red' }}></i>\n                  )}\n                </td>\n                <td>{user.isAdmin ? 'Quản trị viên' : 'Người dùng'}</td>\n                <td>\n                  <LinkContainer to={`/admin/user/${user._id}/edit`}>\n                    <Button variant=\"light\" className=\"btn-sm\">\n                      <i className=\"fas fa-edit\"></i>\n                    </Button>\n                  </LinkContainer>\n                </td>\n                <td>\n                  <Button\n                    variant=\"danger\"\n                    className=\"btn-sm\"\n                    onClick={() => deleteHandler(user._id)}\n                  >\n                    <i className=\"fas fa-trash\"></i>\n                  </Button>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </Table>\n      )}\n    </>\n  );\n};\n\nexport default UserListScreen;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,aAAa,KAAQ,wBAAwB,CACtD,OAASC,KAAK,CAAEC,MAAM,CAAEC,KAAK,KAAQ,iBAAiB,CACtD,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,MAAO,CAAAC,OAAO,KAAM,uBAAuB,CAC3C,MAAO,CAAAC,MAAM,KAAM,sBAAsB,CACzC,OAASC,SAAS,CAAEC,UAAU,KAAQ,wBAAwB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAE/D,KAAM,CAAAC,cAAc,CAAGC,IAAA,EAAiB,IAAhB,CAAEC,OAAQ,CAAC,CAAAD,IAAA,CACjC,KAAM,CAACE,UAAU,CAAEC,aAAa,CAAC,CAAGrB,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAAAsB,QAAQ,CAAGjB,WAAW,CAAC,CAAC,CAE9B;AACA,KAAM,CAAAkB,QAAQ,CAAGjB,WAAW,CAAEkB,KAAK,EAAKA,KAAK,CAACD,QAAQ,CAAC,CACvD,KAAM,CAAEE,OAAO,CAAEC,KAAK,CAAEC,KAAM,CAAC,CAAGJ,QAAQ,CAE1C;AACA,KAAM,CAAAK,SAAS,CAAGtB,WAAW,CAAEkB,KAAK,EAAKA,KAAK,CAACI,SAAS,CAAC,CACzD,KAAM,CAAEC,QAAS,CAAC,CAAGD,SAAS,CAE9B;AACA,KAAM,CAAAE,UAAU,CAAGxB,WAAW,CAAEkB,KAAK,EAAKA,KAAK,CAACM,UAAU,CAAC,CAC3D,KAAM,CAAEC,OAAO,CAAEC,aAAa,CAAEP,OAAO,CAAEQ,aAAa,CAAEP,KAAK,CAAEQ,WAAY,CAAC,CAAGJ,UAAU,CAEzF/B,SAAS,CAAC,IAAM,CACd,GAAI8B,QAAQ,EAAIA,QAAQ,CAACM,OAAO,CAAE,CAChCb,QAAQ,CAACb,SAAS,CAAC,CAAC,CAAC,CACvB,CAAC,IAAM,CACLU,OAAO,CAACiB,IAAI,CAAC,QAAQ,CAAC,CACxB,CACF,CAAC,CAAE,CAACd,QAAQ,CAAEO,QAAQ,CAAEV,OAAO,CAAEa,aAAa,CAAC,CAAC,CAEhD,KAAM,CAAAK,aAAa,CAAIC,EAAE,EAAK,CAC5B,GAAIC,MAAM,CAACC,OAAO,CAAC,iDAAiD,CAAC,CAAE,CACrElB,QAAQ,CAACZ,UAAU,CAAC4B,EAAE,CAAC,CAAC,CAC1B,CACF,CAAC,CAED;AACA,KAAM,CAAAG,aAAa,CAAGd,KAAK,CAAGA,KAAK,CAACe,MAAM,CAAEC,IAAI,EAC9CA,IAAI,CAACC,IAAI,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC1B,UAAU,CAACyB,WAAW,CAAC,CAAC,CAC3D,CAAC,CAAG,EAAE,CAEN,mBACE/B,KAAA,CAAAE,SAAA,EAAA+B,QAAA,eACEjC,KAAA,CAACX,MAAM,EACL6C,OAAO,CAAC,WAAW,CACnBC,SAAS,CAAC,MAAM,CAChBC,OAAO,CAAEA,CAAA,GAAM/B,OAAO,CAACgC,MAAM,CAAC,CAAE,CAAAJ,QAAA,eAEhCnC,IAAA,MAAGqC,SAAS,CAAC,mBAAmB,CAAI,CAAC,iBACvC,EAAQ,CAAC,cAETrC,IAAA,OAAAmC,QAAA,CAAI,yCAAkB,CAAI,CAAC,cAG3BnC,IAAA,UACEwC,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,uBAAiB,CAC7BJ,SAAS,CAAC,mBAAmB,CAC7BK,KAAK,CAAElC,UAAW,CAClBmC,QAAQ,CAAGC,CAAC,EAAKnC,aAAa,CAACmC,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAChD,CAAC,CAGDrB,aAAa,eAAIrB,IAAA,CAACJ,MAAM,GAAE,CAAC,CAC3B0B,WAAW,eAAItB,IAAA,CAACL,OAAO,EAACyC,OAAO,CAAC,QAAQ,CAAAD,QAAA,CAAEb,WAAW,CAAU,CAAC,CAChEF,aAAa,eACZpB,IAAA,CAACR,KAAK,EAAC4C,OAAO,CAAC,SAAS,CAAAD,QAAA,CAAC,iFAEzB,CAAO,CACR,CAGAtB,OAAO,cACNb,IAAA,CAACJ,MAAM,GAAE,CAAC,CACRkB,KAAK,cACPd,IAAA,CAACL,OAAO,EAACyC,OAAO,CAAC,QAAQ,CAAAD,QAAA,CAAErB,KAAK,CAAU,CAAC,cAE3CZ,KAAA,CAACZ,KAAK,EAACwD,QAAQ,MAACC,KAAK,MAACC,UAAU,MAACX,SAAS,CAAC,UAAU,CAAAF,QAAA,eACnDnC,IAAA,UAAAmC,QAAA,cACEjC,KAAA,OAAAiC,QAAA,eACEnC,IAAA,OAAAmC,QAAA,CAAI,IAAE,CAAI,CAAC,cACXnC,IAAA,OAAAmC,QAAA,CAAI,QAAG,CAAI,CAAC,cACZnC,IAAA,OAAAmC,QAAA,CAAI,OAAK,CAAI,CAAC,cACdnC,IAAA,OAAAmC,QAAA,CAAI,OAAK,CAAI,CAAC,cACdnC,IAAA,OAAAmC,QAAA,CAAI,oBAAU,CAAI,CAAC,cACnBnC,IAAA,OAAAmC,QAAA,CAAI,UAAG,CAAI,CAAC,cACZnC,IAAA,OAAAmC,QAAA,CAAI,QAAG,CAAI,CAAC,EACV,CAAC,CACA,CAAC,cACRnC,IAAA,UAAAmC,QAAA,CACGN,aAAa,CAACoB,GAAG,CAAElB,IAAI,eACtB7B,KAAA,OAAAiC,QAAA,eACEnC,IAAA,OAAAmC,QAAA,CAAKJ,IAAI,CAACmB,GAAG,CAAK,CAAC,cACnBlD,IAAA,OAAAmC,QAAA,CAAKJ,IAAI,CAACC,IAAI,CAAK,CAAC,cACpBhC,IAAA,OAAAmC,QAAA,cACEnC,IAAA,MAAGmD,IAAI,CAAE,UAAUpB,IAAI,CAACqB,KAAK,EAAG,CAAAjB,QAAA,CAAEJ,IAAI,CAACqB,KAAK,CAAI,CAAC,CAC/C,CAAC,cACLpD,IAAA,OAAIqC,SAAS,CAAC,aAAa,CAAAF,QAAA,CACxBJ,IAAI,CAACR,OAAO,cACXvB,IAAA,MAAGqC,SAAS,CAAC,cAAc,CAACgB,KAAK,CAAE,CAAEC,KAAK,CAAE,OAAQ,CAAE,CAAI,CAAC,cAE3DtD,IAAA,MAAGqC,SAAS,CAAC,cAAc,CAACgB,KAAK,CAAE,CAAEC,KAAK,CAAE,KAAM,CAAE,CAAI,CACzD,CACC,CAAC,cACLtD,IAAA,OAAAmC,QAAA,CAAKJ,IAAI,CAACR,OAAO,CAAG,eAAe,CAAG,YAAY,CAAK,CAAC,cACxDvB,IAAA,OAAAmC,QAAA,cACEnC,IAAA,CAACX,aAAa,EAACkE,EAAE,CAAE,eAAexB,IAAI,CAACmB,GAAG,OAAQ,CAAAf,QAAA,cAChDnC,IAAA,CAACT,MAAM,EAAC6C,OAAO,CAAC,OAAO,CAACC,SAAS,CAAC,QAAQ,CAAAF,QAAA,cACxCnC,IAAA,MAAGqC,SAAS,CAAC,aAAa,CAAI,CAAC,CACzB,CAAC,CACI,CAAC,CACd,CAAC,cACLrC,IAAA,OAAAmC,QAAA,cACEnC,IAAA,CAACT,MAAM,EACL6C,OAAO,CAAC,QAAQ,CAChBC,SAAS,CAAC,QAAQ,CAClBC,OAAO,CAAEA,CAAA,GAAMb,aAAa,CAACM,IAAI,CAACmB,GAAG,CAAE,CAAAf,QAAA,cAEvCnC,IAAA,MAAGqC,SAAS,CAAC,cAAc,CAAI,CAAC,CAC1B,CAAC,CACP,CAAC,GA7BEN,IAAI,CAACmB,GA8BV,CACL,CAAC,CACG,CAAC,EACH,CACR,EACD,CAAC,CAEP,CAAC,CAED,cAAe,CAAA7C,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module"}